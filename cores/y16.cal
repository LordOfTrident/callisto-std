feature IO

inline __y16_pop_a begin asm
	"ldsi a 2"
	"subp sr a"
	"rdw a sr"
end end

inline __y16_pop_b begin asm
	"ldsi b 2"
	"subp sr b"
	"rdw b sr"
end end

implements IO func printch begin
	__y16_pop_a
	asm
		"ldsi b 0"
		"out b a"
	end
end

func = begin
	__y16_pop_a
	__y16_pop_b
	asm
		"cmp a b"
		"jzb .push_1"
		"ldsi a 0"
		"ldsi b 2"
		"wrw sr a"
		"addp sr b"
		"ret"
		".push_1:"
		"ldi a 0xFFFF"
		"wrw sr a"
		"ldsi b 2"
		"addp sr b"
	end
end
